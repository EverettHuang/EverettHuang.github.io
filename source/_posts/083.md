---
title: 利用github+hexo搭建个人博客
date: 2019-10-02 17:04:14
tags: github blog
categories: Other
description: 这篇博文主要介绍Github-Hexo的安装，配置，以及hexo环境的备份，恢复
cover: /Depository/Img/Post/0011.png
top_img: /Depository/Img/Post/0010.jpeg
---

<center>这篇博文主要介绍Github-Hexo的安装，配置，以及hexo环境的备份，恢复。</center>


---
### 搭建Hexo博客
---

#### 1.安装git并配置SSHkey
```bash
sudo apt install git
```
注册github帐号，建立软件仓库，再接着设置SSHkey
```bash
git config --global user.name "yourgithubname"
git config --global user.email "youremail"
```
```bash
ssh-keygen -t rsa -C "youremail"
```
然后将`.ssh/id_rsa.pub`中的内容复制进github的sshkey里
测试是否成功
```bash
ssh -T git@github.com
```

---
#### 2.安装nodejs

首先从官网下在nodejs程序压缩包，然后解压并重命名为nodejs

```bash
sudo tar -xvf node-XXXXXX-linux-x64.tar.xz
```

将解压后的文件夹更名为nodejs后放入家目录下的program文件夹下(可自行选择存放路径，更改下列链接命令即可)

通过软链接变为全局

```bash
sudo ln -s /home/\$USER/program/nodejs/bin/npm /usr/local/bin/
sudo ln -s /home/\$USER/program/nodejs/bin/node /usr/local/bin/
```

检查是否安装成功

```bash
node -v
npm -v
```

---

#### 3.安装hexo

```bash
npm install hexo-cli -g
```

通过软链接将hexo变为全局:

```bash
sudo ln -s /home/\$USER/program/nodejs/bin/hexo /usr/local/bin/
```

新建一个Blog文件夹，初始化默认文件到Blog文件夹

```bash
mkdir Blog
hexo init Blog
cd Blog
npm install
```

hexo到此安装完毕

---
#### 4.更换hexo主题

* hexo默认的主题不是很好看，可以到hexo官网寻找喜欢的主题替换，
* 在themes文件夹中，git clone主题地址，
* 修改GhBlog文件中的`_config.yml`文件:将themes关键字后面改为主题名称
* 主题需要的插件和相关配置请查看主题提供者给的wiki

 #[hexo官方文档](https://hexo.io/zh-cn/docs/)

---

#### 5.安装自动部署到github的插件

```bash
npm install hexo-deployer-git --save
```

更改Blog中_config.yml文件

```bash
vi _config.yml
```

找到deploy关键字:

```bash
deploy:
    type: git
    repository: 软件仓库地址
    branch: master
```

---

#### 6.撰写新文章

```bash
hexo new "postname"
```

---

#### 7.本地部署预览

```bash
hexo clean
hexo g
hexo s
```

---

#### 8.部署上传github

```bash
hexo clean
hexo g
hexo d
```

---

#### 9.绑定域名

申请域名后，添加两条`CNAME`解析，一条为`www`，另一条为`@`或空，然后在`GhBlog/source`文件夹中添加名为`CNAME`文本，文本内容为自己申请需要绑定的域名。

---

### 备份hexo环境

备注hexo源文件，防止换电脑或者电脑损坏造成hexo环境丢失：

#因为`hexo init`的时候已经在GhBlog文件中创建了`.gitignore`文件，会过滤掉不需要备份的文件

#将主题文件夹中的`.git`和`.gitxxxx`文件删除，否则会影响上传

```bash
cd Blog
git init
git add .
git commit -m "backups"
git remote add origin <软件仓库地址>
git branch hexo       #创建名为hexo的分支
git push -u origin hexo
```
#遇到出错的情况，可先把软件仓库pull下来再push

```bash
git pull origin hexo
```

---

### 恢复hexo环境

* 按照安装hexo步骤安装完hexo，
* 安装自动部署到github的插件

```bash
npm install hexo-deployer-git --save
```

* 根据备份主题安装相应插件

*个人使用的butterfly主题需要安装：`npm install hexo-renderer-jade hexo-renderer-pug hexo-renderer-stylus --save`*

*[butterfly主题github地址](https://github.com/jerryc127/hexo-theme-butterfly)*

* 删除Blog文件夹中备份过的文件及文件夹，然后pull仓库

 ```bash
cd Blog
git init
git checkout -b hexo  #本地创建hexo分支
git remote add origin <软件仓库地址>
git pull origin hexo
git add .
git commit -m "blog"
git push origin hexo  #如果本地没有创建hexo分支，push时hexo应该改为master:hexo
```

---

### 附：

---

<center>写文章并备份和部署</center>

```bash
git pull origin hexo
hexo new post "new post name"
git add .
git commit -m "xxx"
git push origin hexo
hexo clean
hexo g
hexo d
```

---
