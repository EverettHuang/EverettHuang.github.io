---
title: python数据结构
date: 2019-10-10 17:27:55
tags: python
categories: python
description: 数据结构是以某种方式组合起来的数据元素集合，本文介绍python的序列和映射这两种数据结构
cover: /Depository/Img/Post/0025.png
top_img: /Depository/Img/Post/0024.jpeg
---

**<center>python数据结构</center>**

数据结构是以某种方式组合起来的数据元素集合，python中的数据结构有**序列**和**映射**

---

## 序列

**序列**：序列中每个元素都有编号，即其位置或索引，其中第一个元素索引为0

重要的序列有：**元组**，**列表**，**字符串**

---

### 1.通用序列操作
通用序列操作包括：**索引**，**切片**，**相加**，**相乘**，**成员资格检查**，**迭代**等

#### 索引
索引为访问单个元素

```python
>>>  greeting = 'Hello'
>>>  greeting[0]
'H'
>>>  greeting[-1]
'o'
```

* 可直接对字符串(或其他序列)进行所索引：`'Hello'[1]`为`e`
* 可直接对输入进行索引赋值：`x = input('XXXXX')[0]`

#### 切片

切片用以访问特定范围内的元素

```python
>>>  greeting = 'Hello'
>>>  greeting[0:2]
'He'（包含第一个索引不包含第二个索引）
```

* 可用负索引进行切片，从后往前进行切片
* 切片时，第一个索引在第二个索引后面即返回空序列
* 可省略第一或第二个索引来切片到最前或最后，都省略即表示复制整个序列
* 可指定步长来表示每隔步长-1个元素提取一个元素：`greeting[0:4:2]`为`'Hl'`
    * 步长不能为0
    * 步长可为负，表示从右向左，且步长为负时第一个索引大于第二个索引才正常切片
    * 若切片省略两个索引时，步长为负会正常切片

#### 相加

可用`+`号拼接序列，但是只能拼接同类型序列

#### 相乘

序列与数字x相乘，即重复序列x次来创建一个新序列

#### 成员资格检查

用运算符`in`,返回`true`或`false`

```python
>>>  permissions = 'rw'
>>>  'w' in permissions
'True'
```

---

### 2.列表

#### 创建列表
* 列表用方括号`[]`括起来
* 可用list函数创建列表：可将任何序列作为参数(包括字符串)
* 空列表为不包含任何内容的两个方括号`[]`表示
* 可使用[None]表示没有任何东西的空列表
* 初始化长度为10的列表：`requence = [None]*10`

#### 列表基本操作
* 列表支持标准序列操作(索引/切片/乘法/成员资格检查等)
* 给索引或切片赋值：`greeting[0] = u`或`greeting[1:3] = ux`，赋值空序列相当于删除
* 删除索引或切片：`del greeting[2]`或`del greeting[2:3]`，可替换一个序列到空切片相当于插入

#### 列表方法

[列表方法请查阅python参考手册](https://everetthuang.github.io/2019/10/08/py02)

---

### 3.元组

#### 创建元组
* 只需要将一些值用逗号隔开，就能自动创建一个元组，通常创建元组会用圆括号`()`括起来
* tuple函数可以用一个序列作为参数将其转化为元组
* 空元组用两个不包含任何内容的元括号表示
* 就算创建一个只有一个值的元组，也需要用逗号隔开

#### 元组基本操作
* 元组和列表相似，但是元组是不能修改的(字符串也不能修改)
* 元组支持标准序列操作(索引/切片/乘法/成员资格检查等)，但因元组不能修改即不能赋值删除等
操作

---

### 4.字符串

#### 创建字符串

* 有单引号/双引号/长/原始字符串，单引号和双引号字符串没有区别

* 长字符串可跨越多行，其单三引号和双三引号没有区别

* 可用转义字符`\`对单双三引号进行转义

* 可用`+`号拼接字符串

* 原始字符串`r'XXXX'`中最后一个字符不能是反斜杠`\

#### 字符串基本操作

* 字符串不能修改
* 字符串支持标准序列操作(索引/切片/乘法/成员资格检查等)，但因字符串不能修改即不能赋值删除等操作

#### 设置字符串格式

***此处只介绍字符串format方法***

**format方法**：在替换字段用花括号扩起来，花括号中可以选择包含名称/索引及如何对相应值进行转换和格式设置的信息

* 每个花括号对应format后的一个参数(可在花括号内填入字段，在format里对字段进行赋值)
* 花括号内使用索引时不能同时自动编号和手动编号混用

```python
>>>  "{foo} {1} {bar} {0}".format(1, 2, bar=4, foo=3)
'3 2 4 1'
```
* 可在花括号内使用常规切片或索引操作来展示值的一部分

```python
>>>  fullname = ["Alfred", "Smoketoomuch"]
>>>  "Mr {name[1]}".format(name=fullname)
'Mr Smoketoomuch'
```

##### 基本转换
* !s/!r/!a分别表示用str/repr/ascii转换值
`"{pi!s} {pi!r} {pi!a}".format(pi = "everett")`

* 花括号中添加格式说明(即`:`),并在冒号后面添加类型说明符

类型 | 含义 | 类型 | 含义 | 类型 | 含义
:-: | :-: | :-: | :-: | :-: | :-: 
b | 将整数表示为二进制数 | c | 将整数解读为Unicode码点 | d | 将整数视为十进制数进行处理 (这是整数默认使用的说明符)
e | 使用科学表示法来表示小数(用e来表示指数) | E | 与e相同，但使用E来表示指数 | o | 将整数表示为八进制数
f | 将小数表示为定点数 | F | 与f相同，但对于特殊值(nan/inf)用大写表示 | s | 保持字符串格式不变，这是默认的字符串说明符
g | 自动在定点表示法和科学表示法之间选择，这是默认用于小数的说明符，但在默认情况下至少有一位小数 | G | 与g相同，但用大写来表示指数和特殊值 | n | 与g相同，但插入随区域而异的数字分割符
x | 将整数表示为十六进制并使用小写字母 | X| 与x相同，但使用大写字母 | % | 将数表示为百分比值(乘以100,按说明符f设置格式，再在后面加上%)

##### 宽度精度和千位分隔符
* 可在格式说明符后类型说明符前用`整数`表示宽度
* 可在格式说明符后类型说明符前用`.整数`表示精度
* 可在格式说明符后类型说明符前用`逗号`添加千位分隔符(如需表示宽度或精度，逗号只能在宽度和精度中间)

##### 符号对齐和0填充
* 在指定宽度和精度的数前可以添加标志，该标志可以是 `零/加号/减号/空格`其中`零`表示使用0来填充数字
* 要指定左对齐右对齐或居中可使用`<` ` >` `^`
* 如果要给正数加上+号，可使用说明符+(将其放在对齐说明符的后面)，如果将符号说明符指定为`空格`,会在正数前面添加空格而不是+号

* #号可放在符号说明符和宽度之间，触发另一种转换方式转换细节随类型而异


#### 字符串方法

[字符串方法请查阅python参考手册](https://everetthuang.github.io/2019/10/08/py02)

---

## 映射

映射：通过名称访问其对应值的数据结构

***python内置只有字典这一种映射数据类型***

---

### 字典

*字典是python中唯一的映射类型，其中值不按顺序排列，而是在键下，键可以是数/字符串/元组*

#### 创建字典

* 键必须独一无二不可重复

1. 可使用花括号将键值括起来，键和值之间用冒号，不同的键值之间用逗号分隔

```python
phonebook = {'Alice': '2341', 'Beth': '9102', 'Cecil': '3258'}
```

2. 可用函数dict从其他映射(字典)或键-值对序列创建字典(还可用关键实参调用)

```python
>>>  item = [('name', 'Gumby'), ('age', 42)]
>>>  d = dict(item)
>>>  d
{'age': 42, 'name': 'Gumby'}
```

```python
>>>  d = dict(name='Gumby', age=42)
{'age': 42, 'name': 'Gumby'}
```

3. 空字典用两个方括号表示：`{}`

```bash
优点：
1.键可以是任何不可变的类型
2.可以赋值给一个没有的键(将自动创建一个新项)，而序列不行
```

#### 字典基本操作

##### 类似序列操作

* `len(d)`返回字典`d`包含的项(键-值对)数
* `d[k]`返回与键`k`相关的值
* `d[k] = v`将值`v`关联到键`k`
* `del d[k]`删除键为`k`的项
* `k in d`检查字典`d`是否包含键为`k`的项

##### 不同于序列操作

* 键的类型：字典中的键可以是整数，但并非必须是整数(字典中的键可以是任何不可变的类型，如浮点数字符串或元组)
* 自动添加：即便是字典中原本没有的键，也可以给它赋值，这将在字典中创建一个新项
* 成员资格：表达式`k in d`(d为字典)查找的是键而不是值，而表达式`v in l`(l为列表)查找的是值而不是索引


##### 字符串格式设置功能用于字典

可用format_map来指出你将通过一个映射来提供所需的信息

```python
>>>  phonebook = {'Beth': '9102', 'Alice': '2341', 'Cecil': '3258'}
>>>  "Cecil's phone unmber is {Cecil}.".format_map(phonebook)
Cecil's phone unmber is 3258
```

#### 字典方法

[字典方法请查阅python参考手册](https://everetthuang.github.io/2019/10/08/py02)

---

至此，python数据结构介绍完毕

