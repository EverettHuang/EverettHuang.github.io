---
title: Linux存储结构与磁盘管理
date: 2019-10-15 12:34:46
tags: Linux
categories: Linux
description: 
cover: /Depository/Img/Post/
top_img: /Depository/Img/Post/
---


**<center>Linux存储结构与磁盘管理</center>**


#### 目录结构
在Linux中一切皆文件，包括目录，字符设备，块设备，套接字，打印机等
Linux系统中的一切文件都是从“根(/)”目录开始的，并按照文件系统层次化标准(FHS)采用树形结构来存放文件

表：常见的目录名称以及相应的内容

目录名称 | 应放置文件的内容
:-: | :-:
/boot | 开机所需文件--内核，开机菜单以及所需配置文件等
/dev | 以文件形式存放任何设备与接口
/etc | 配置文件
/home | 家目录
/bin | 存放单用户模式下还可以操作的命令
/lib | 开机时用到的函数库，以及/bin与/sbin下面的命令要调用的函数
/sbin | 开机过程中需要的命令
/media | 用于挂载设备文件的目录
/opt | 放置第三方的软件
/root | 系统管理员的家目录
/srv | 一些网络设备的数据文件目录
/tmp | 任何人均可使用的“共享”临时目录
/proc | 虚拟文件系统，例如系统内核，进程，外部设备以及网络状态等
/usr/local | 用户自行安装的软件
/usr/sbin | Linux系统开机时不会使用到的软件/命令/脚本
/usr/share | 帮助与说明文件，也可放置共享文件
/var | 主要存放经常变化的文件，比如日志
/lost+found | 方文件系统发生错误时，将一些丢失的文件片段存放在这里

* 路径：绝对路径，相对路径

#### 物理设备命名规则

表：常见的硬件设备及其文件名称

硬件设备 | 文件名称
:-: | :-:
IDE设备 | /dev/hd[a-d]
SCSI/SATA/U盘 | /dev/sd[a-p]
软驱 | /dev/fd[0-1]
打印机 | /dev/lp[0-15]
光驱 | /dev/cdrom
鼠标 | /dev/mouse
磁带机 | /dev/st0或/dev/ht0

* 由于现在的IDE设备已经很少见了，所以一般的硬盘设备都会是以"/dev/sd"开头的
* 主分区或拓展分区的编号从1开始，到4结束
* 逻辑分区的从编号5开始
* 设备名称顺序不是由插槽决定的，而是由内核识别顺序决定的，知识恰巧内核识别顺序一般按插槽顺序
* 分区的编号并不一定是按顺序，也可以指定编号，所以sda3不能判断有3个分区，只能表示编号为3的分区


* 每个扇区的容量为512字节：其中第一个扇区最重要，保存着主引导记录与分区表信息
* 对第一个扇区来讲，主引导记录需要占用446字节，分区表为64字节，结束符占用2字节；其中分区表中每记录一个分区信息就需要16个字节，这样最多只有4个分区信息可以写到第一个扇区中，这4个分区就是4个主分区(可以将写入第一个扇区的16个字节的空间拿出来指向另一个分区，即拓展分区，然后再拓展分区中创建出数个逻辑分区)


#### 文件系统

用户在硬件存储设备中执行文件建立，写入，读取，修改，转存与控制等操作都是依靠文件系统来执行的

Linux系统支持数十种的文件系统，常用的有

* Ext4  :  Ext3的改进版本，支持的存储容量高达1EB(1EB=1073741824GB),且能够有无限多的子目录。另外，Ext4文件系统能够批量分配block块，从而极大地提高了读写效率
* XFS  :  是一种高性能的日志文件系统，优势在发生意外宕机后尤为明显，即可以快速地恢复可能被破坏的文件，而且强大的日志功能只用花费极低的计算和存储性能。并且它最大可支持的存储容量为18EB

Linux会把每个文件的权限与属性记录在inode中，而且每个文件占用一个独立的inode表格，该表格默认大小为128字节，里面记录着如下信息：
* 该文件的访问权限(read,write,execute)
* 该文件的所有者与所属组(owner,group)
* 该文件的大小(size)
* 该文件的创建或内容修改时间(ctime)
* 该文件的最后一次访问时间(atime)
* 该文件的修改时间
* 文件的特殊权限(SUID,SGID,SBIT)
* 该文件的真实数据地址

文件的实际内容则保存在block块中

#### 挂载硬件设备

mount

umount

fdisk

du

swap

xfs_quota

edquota



#### RAID(独立冗余磁盘阵列)

#### LVM(逻辑卷管理器)

#### 备份