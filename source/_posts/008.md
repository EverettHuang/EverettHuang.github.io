---
title: Linux基础网络服务
date: 2019-10-13 12:34:46
tags: Linux
categories: Linux
description: 
cover: /Depository/Img/Post/
top_img: /Depository/Img/Post/
---

**<center>Linux基础网络服务</center>**


---

#### FTP，TFTP

FTP--网络文件传输协议
TFTP是FTP的简化版本

**FTP**

文件传输协议：FTP是一种在互联网中进行文件传输的协议，基于客户端/服务器模式，默认使用20,21号端口，其中20端口(数据端口)用于进行数据传输，端口21(命令端口)用于接受客户端发出的相关FTP命令与参数

* 主动模式：FTP服务器主动向客户端发起连接请求
* 被动模式：FTP服务器等待客户端发起连接请求(FTP默认的工作模式)

vsftpd是一款运行在Linux操作系统上的FTP服务程序，不仅完全开源而且免费，此外，还有很高的安全性，传输速度，以及支持虚拟用户验证等其他FTP服务程序不具备的特点

* vsftpd服务进程的主配置文件(/etc/vsftpd/vsftpd.conf)

表：vsftpd服务程序常用的参数及其作用

参数 | 作用
:-: | :-:
listen=[YES\|NO] | 是否以独立运行的方式监听服务
listen_address=IP地址 | 设置要监听的IP地址
listen_port=21 | 设置FTP服务的监听端口
download_enable=[YES\|NO] | 是否允许下载文件
userlist_enables=[YES\|NO] userlist_deny=[YES\|NO] | 设置用户列表为“允许”还是“禁止”操作
max_clients=0 | 最大客户端连接数，0为不限制
max_per_ip=0 | 同一IP地址的最大连接数，0为不限制
anonymous_enable=[YES\|NO] | 是否允许匿名用户访问
anon_upload_enable=[YES\|NO] | 是否允许匿名用户上传文件
anon_umask=022 | 匿名用户上传文件的umask值
anon_root=/var/ftp | 匿名用户的FTP目录
anon_mkdir_write_enable=[YES\|NO] | 是否允许匿名用户创建目录
anon_other_write_enable=[YES\|NO] | 是否开放匿名用户的其他写入权限(包括重命名，删除等操作权限)
anon_max_rate=0 | 匿名用户的最大传输速率(字节/秒)，0为不限制
local_enable=[YES\|NO] | 是否允许本地用户登录FTP
local_umask=022 | 本地用户上传文件的umask值
local_root=/var/ftp | 本地用户的FTP根目录
chroot_local_user=[YES\|NO] | 是否将用户权限禁锢在FTP目录，以确保安全
local_max_rate=0 | 本地用户最大传输速率(字节/秒)，0为不限制

FTP允许用户以三种认证模式登陆到FTP服务器上

* 匿名开放模式：是一种最不安全的认证模式，任何人都可以无密码验证而直接登陆到FTP服务器
* 本地用户模式：是通过Linux系统的本地账户密码信息进行认证的模式，相较于匿名开放模式更安全，而且配置起来也简单。但是如果被黑客破解了账户的信息，就可以畅通无阻地登陆FTP服务器，从而完全控制整台服务器
* 虚拟用户模式：最安全的一种认证模式，它需要为FTP服务单独建立用户数据库文件，虚拟出用来进行口令验证的账户信息，而这些账户信息在服务器系统中实际上是不存在的

**TFTP**

---

#### Samba,NFS

* NFS

* Samba

---

#### iSCSI

---

#### DNS

---

#### DHCP

---

#### Squid代理缓存服务

---

#### 邮件系统



##### 常见邮件协议

* SMTP 简单邮件传输协议，占用25/TCP端口，用于发送和中转邮件

* POP3 邮局协议版本3，占用110/TCP端口，用于将邮件存储到本机

* IMAP4 消息访问协议版本4，占用143/TCP端口，用于在本地主机上访问邮件

* MUA（Mail User Agent）邮件用户代理，接收邮件所使用的邮件客户端，使用IMAP或POP3协议与服务器通信；

* MTA（Mail Transfer Agent）MTA 邮件传输代理， 通过SMTP协议发送、转发邮件；

* MDA（Mail Deliver Agent）邮件投递代理，将MTA接收到的邮件保存到磁盘或指定地方，通常会进行垃圾邮件及病毒扫描；

* MRA（Mail Receive Agent）负责实现IMAP与POP3协议，与MUA进行交互；


##### 利用postfix和mailutils搭建只发送SMTP服务器

`apt update`

主机名称修改为：例如：seekey.com!!! 不确定是否需要变更主机名，待测试

`hostname set-hostname seekey.com` 

`apt install mailutils postfix`

安装mailutils时选择Internet Site模式

设置邮件服务器名称，可以是具有A记录的域名或服务器主机名，待测试

配置Postfix MTA服务器

`vi /etc/postfix/main.cf`

将inet_interfaces = all 修改为inet_interfaces = loopback，仅接收本地的发送邮件请求

将myhostname设置为服务器域名，不确定是否需要域名，待测试

重启Postfix服务，

`systemctl restart postfix`

查看Postfix服务状态

`systemctl status postfix`


发送邮件

`echo "Message body" | mail -s "Message title" userx@example.com`


##### postfix Dovecot

完整邮件服务可用postfix, Dovecot实现，需添加A记录和MX记录解析

* 检查A记录  Ping 域名   

* 检查MX记录 nslookup -q=mx 域名

























---

#### nginx

---

#### mariadb

---

#### LNMP


